class AddSlide extends React.Component{constructor(e){super(e),this.addSlide=this.addSlide.bind(this)}addSlide(e){e.preventDefault(),e.stopPropagation(),this.props.addSlide(null)}render(){return React.createElement("button",{onClick:this.addSlide,style:{margin:"20px 0"},className:"button button-primary"},"Add Slides")}}class Slide extends React.Component{render(){const e=this.props.slide,t={backgroundImage:`url('${e.sizes.large.url}')`};return React.createElement("li",{id:e.id},React.createElement("div",{className:"image-bg",style:t},React.createElement("div",{className:e.caption_position+" caption"},React.createElement("h2",{className:"post-title"},e.title),e.caption)))}}class Slider extends React.Component{constructor(e){super(e),this.slider=null}componentDidMount(){this.slider=jQuery("#srs-preview").unslider({autoplay:!1,delay:6e3,infinite:!1,arrows:{prev:'<span class="unslider-arrow prev  he-chevron-circle-left"></span>',next:'<span class="unslider-arrow next  he-chevron-circle-right"></span>'}})}componentDidUpdate(){this.slider.data("unslider").calculateSlides()}render(){const e={height:"300px",margin:"10px 0 0"},t={height:"300px",border:"dashed 2px #FFF",margin:"10px 0",background:"#77caf4"};return this.props.slides.length?React.createElement("div",null,React.createElement("div",{className:"srs-slider srs-preview",style:e,id:"srs-preview"},React.createElement(SliderInner,{slides:this.props.slides})),React.createElement("span",null,"Note: This slider preview doesn't use the right sized images. This preview is only for reference and a work in progress.")):React.createElement("div",{className:"no-slides unslider",style:t},React.createElement("div",{className:"caption center"},React.createElement("h1",null,"You have no slides :-("),React.createElement("p",null,"Please add a slide")))}}class SliderInner extends React.Component{constructor(e){super(e)}render(){return React.createElement("ul",null,this.props.slides.map(e=>React.createElement(Slide,{slide:e,key:"slide_"+e.id.toString()})))}}class SlideDetails extends React.Component{constructor(e){super(e),this.deleteSlide=this.deleteSlide.bind(this),this.moveSlideUp=this.moveSlideUp.bind(this),this.moveSlideDown=this.moveSlideDown.bind(this),this.updateSlideDetails=this.updateSlideDetails.bind(this),this.updateCheckBox=this.updateCheckBox.bind(this),this.makeSlideActive=this.makeSlideActive.bind(this)}updateSlideDetails(e){var t={[$(e.target).data("name")]:$(e.target).val()};this.props.updateSlideDetails(this.props.slide.id,t)}updateCheckBox(e){const t=$(e.target).data("name"),a=$(e.target).val();if(e.target.checked)var l={[t]:a};else l={[t]:!1};this.props.updateSlideDetails(this.props.slide.id,l)}deleteSlide(e){e.preventDefault(),this.props.deleteSlide(this.props.slide.id)}moveSlideUp(e){e.preventDefault(),this.props.moveSlide(this.props.slide.id,-1)}moveSlideDown(e){e.preventDefault(),this.props.moveSlide(this.props.slide.id,1)}makeSlideActive(e){var t=jQuery(e.currentTarget).data("index");jQuery("#srs-preview").unslider({autoplay:!1,delay:6e3,infinite:!1}).data("unslider").animate(t)}render(){const e=this.props.slide,t={left:"Left",right:"Right",bottom_center:"Bottom Center",center:"Center"},a={width:"22.5%",float:"left",display:"inline-block",marginTop:"1.8em"},l={backgroundImage:`url(${e.sizes.medium.url})`,padding:"12.5%",backgroundSize:"cover"};return React.createElement("div",{className:"slide-details cf clearfix","data-index":this.props.index,onClick:this.makeSlideActive},React.createElement("div",{style:l,className:"alignleft"}," "),React.createElement("div",{className:" details"},React.createElement("input",{className:"",type:"text","data-name":"title",value:e.title,onChange:this.updateSlideDetails}),React.createElement("textarea",{className:"",type:"text","data-name":"caption",value:e.caption,onChange:this.updateSlideDetails}),React.createElement("label",{style:{width:"55%",float:"left",display:"inline-block",paddingRight:"10px",boxSizing:"border-box"}},"Target URL",React.createElement("input",{className:"",type:"text",value:e.anchor,"data-name":"anchor",defaultValue:"#",onChange:this.updateSlideDetails})),React.createElement("label",{style:a},React.createElement("input",{className:"alignleft",type:"checkbox",value:"_blank","data-name":"target",onChange:this.updateCheckBox,checked:e.target})," New window"),React.createElement("label",{style:a},React.createElement("input",{className:"alignleft",type:"checkbox",value:"nofollow",onChange:this.updateCheckBox,"data-name":"rel",checked:e.rel}),'  rel="nofollow"'),React.createElement("div",{className:"clear"}),React.createElement("label",null,"Caption position",React.createElement("select",{className:"",type:"text",value:e.caption_position?e.caption_position:"bottom_center","data-name":"caption_position",onChange:this.updateSlideDetails},Object.keys(t).map((e,a)=>React.createElement("option",{key:a,value:e},t[e])))),React.createElement("div",{className:"clear"}),React.createElement("div",{className:"move-controls cf clear"},React.createElement("button",{onClick:this.moveSlideDown},React.createElement("span",{className:"dashicons dashicons-arrow-down-alt"})),React.createElement("button",{onClick:this.moveSlideUp},React.createElement("span",{className:"dashicons dashicons-arrow-up-alt"}))),React.createElement("button",{className:"button button-secondary alignright",onClick:this.deleteSlide},"Delete slide")),React.createElement("div",{className:"clear"}))}}class Slides extends React.Component{constructor(e){super(e)}render(){return React.createElement("div",{className:"slides"},this.props.slides.map((e,t)=>React.createElement(SlideDetails,{slide:e,key:"details_"+e.id.toString(),editSlide:this.props.editSlide,deleteSlide:this.props.deleteSlide,moveSlide:this.props.moveSlide,updateSlideDetails:this.props.updateSlideDetails,index:t})))}}class App extends React.Component{constructor(e){super(e);const t=SLIDER?SLIDER.slides:[];this.state={slides:t,hash:{}},this.addSlide=this.addSlide.bind(this),this.handleAddSlide=this.handleAddSlide.bind(this),this.deleteSlide=this.deleteSlide.bind(this),this.moveSlide=this.moveSlide.bind(this),this.getSlideIndex=this.getSlideIndex.bind(this),this.updateSlideDetails=this.updateSlideDetails.bind(this),this.file_frame=!1,this.id=null}addSlide(e){this.id=e,this.file_frame?this.file_frame.open():(this.file_frame=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Add selected images to slider"},multiple:!0}),this.file_frame.on("select",()=>{var e=this.file_frame.state().get("selection"),t=[];e.map(e=>{e=(({id:e,title:t,filesizeInBytes:a,height:l,width:i,sizes:s,caption:n,description:d})=>({id:e,title:t,filesizeInBytes:a,height:l,width:i,sizes:s,caption:n,description:d}))(e.attributes),t.push(e)}),this.handleAddSlide(t)}),this.file_frame.on("open",()=>{this.file_frame.state().get("selection").reset(this.id?[wp.media.attachment(this.id)]:[])}),this.file_frame.open())}deleteSlide(e){let t=this.state.slides.slice(0);for(var a=0;a<t.length;a++)if(t[a].id===e){t.splice(a,1);break}this.setState({slides:t})}moveSlide(e,t){let a=this.state.slides.slice(0);var l=this.getSlideIndex(e),i=a[l];a.splice(l,1),a.splice(l+t,0,i),this.setState({slides:a})}getSlideIndex(e){const t=this.state.slides;for(var a=0;a<t.length;a++)if(t[a].id===e)return a}updateSlideDetails(e,t){let a=this.state.slides.slice(0);var l=this.getSlideIndex(e),i=a[l];i=JSON.parse(JSON.stringify(Object.assign(i,t))),a[l]=i,this.setState({slides:a})}handleAddSlide(e){var t=this.state.slides.slice(0);e.map(e=>{if(t.length){for(var a=!0,l=0;l<t.length;l++)if(t[l].id===e.id){a=!1;break}a&&(t=[...t,e])}else t=[e]}),this.setState({slides:t})}render(){const e=this.state.slides;var t="";return e.length&&(t=React.createElement(AddSlide,{addSlide:this.addSlide})),React.createElement("div",null,React.createElement(Slider,{slides:e}),React.createElement(AddSlide,{addSlide:this.addSlide}),React.createElement(Slides,{slides:e,deleteSlide:this.deleteSlide,moveSlide:this.moveSlide,updateSlideDetails:this.updateSlideDetails}),React.createElement("input",{type:"hidden",name:"slider[slides]",value:JSON.stringify(e)}),t)}}ReactDOM.render(React.createElement(App,null),document.getElementById("slider"));class SecondaryApp extends React.Component{constructor(e){super(e);var t=SLIDER?SLIDER.properties:{};t=Object.assign({height:600,width:1200},t),this.state={properties:t},this.updateSliderProperties=this.updateSliderProperties.bind(this)}updateSliderProperties(e){e.preventDefault();const t=$(e.target).data("name"),a=$(e.target).val(),l=this.state.properties;this.setState({properties:Object.assign(l,{[t]:a})})}render(){let e=this.state.properties;return React.createElement("div",null,React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"Width"),React.createElement("td",null,React.createElement("input",{type:"number",name:"slider[properties][width]",value:e.width,"data-name":"width",onChange:this.updateSliderProperties}))),React.createElement("tr",null,React.createElement("td",null,"Height"),React.createElement("td",null,React.createElement("input",{type:"number",name:"slider[properties][height]",value:e.height,"data-name":"height",onChange:this.updateSliderProperties}))),React.createElement("tr",null,React.createElement("td",null,"Slider type"),React.createElement("td",null,React.createElement("select",{name:"slider[properties][slider_type]",value:e.slider_type,"data-name":"slider_type",onChange:this.updateSliderProperties},React.createElement("option",{value:"background"},"Image as background"),React.createElement("option",{value:"inline"},"Inline image")))),React.createElement("tr",null,React.createElement("td",{colSpan:2},React.createElement("h3",null,"Advanced Options"))),React.createElement("tr",null,React.createElement("td",null,React.createElement("input",{type:"checkbox",className:"alignright",name:"slider[properties][stretch]",value:"1","data-name":"stretch",defaultChecked:e.stretch,id:"stretch"})),React.createElement("td",null,React.createElement("label",{htmlFor:"stretch"},"100% Wide"))),React.createElement("tr",null,React.createElement("td",null,React.createElement("input",{type:"checkbox",value:"1",className:"alignright","data-name":"hide_on_mobile",name:"slider[properties][hide_on_mobile]",id:"hide_on_mobiles"})),React.createElement("td",null,React.createElement("label",{htmlFor:"hide_on_mobiles"},"Hide on Mobiles"))),React.createElement("tr",null,React.createElement("td",null,React.createElement("input",{type:"checkbox",className:"alignright",name:"slider[properties][hide_on_desktops_tablets]",value:"1","data-name":"hide_on_desktops_tablets",id:"hide_on_desktops_tablets"})),React.createElement("td",null,React.createElement("label",{htmlFor:"hide_on_desktops_tablets"},"Hide on Desktops & Tablets"))),React.createElement("tr",null,React.createElement("td",{colSpan:2},React.createElement("h3",null,"Developer Options"))),React.createElement("tr",null,React.createElement("td",null,"Wrapper class"),React.createElement("td",null,React.createElement("input",{type:"text",className:"alignright",name:"slider[properties][wrapper_class]",value:e.wrapper_class,"data-name":"wrapper_class"}))),React.createElement("tr",null,React.createElement("td",null,"Slider class"),React.createElement("td",null,React.createElement("input",{type:"text",className:"alignright",name:"slider[properties][slider_class]",value:e.slider_class,"data-name":"slider_class"}))),React.createElement("tr",null,React.createElement("td",null,"Slide class"),React.createElement("td",null,React.createElement("input",{type:"text",className:"alignright",name:"slider[properties][slide_class]",value:e.slide_class,"data-name":"slide_class"}))))),React.createElement("div",{className:"clear"}))}}ReactDOM.render(React.createElement(SecondaryApp,null),document.getElementById("slider-properties"));